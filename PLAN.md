# PLAN

## Milestone 列表
- 0：项目骨架 + 假数据波浪
- 1：系统音频捕获 + 特征驱动
- 2：古典麦浪渲染强化
- 3：Now Playing 元数据展示
- 4：菜单栏与设置

## 执行顺序规则
- 必须按 Milestone 0 → 1 → 2 → 3 → 4 顺序执行
- 必须先跑假数据 → 再接入系统音频

## 统一输出格式（每个 Milestone 必须遵守）
```
完成内容：一句话说明本 Milestone 做了什么
变更产出：列出新增/修改的文件或功能
本地验证：可复制的验证步骤
已知问题/下一步：如无写“无”
```

## Milestone 0
- 要做什么：搭建 SwiftUI 基础工程，完成透明置顶可拖拽悬浮窗，WaveView 使用假数据动画
- 要产出什么：
  - 功能：应用可启动，悬浮窗显示波浪动画
  - 文件：新增/修改窗口管理与波浪视图相关文件
- 完成判定：启动后出现悬浮窗，波浪稳定播放且可拖拽
- 输出格式：遵循“统一输出格式”

## Milestone 1
- 要做什么：接入系统音频输出捕获，提取能量/低频特征并平滑处理，替换假数据驱动波浪
- 要产出什么：
  - 功能：播放音乐时波浪随节奏变化，低频重拍明显增强
  - 文件：新增/修改音频采集与特征处理相关文件
- 完成判定：有音乐时波浪变化明显，静音时波浪回落且稳定
- 输出格式：遵循“统一输出格式”

## Milestone 2
- 要做什么：实现“古典麦浪”视觉（多层波叠加、传播感、重拍强化、静音呼吸）
- 要产出什么：
  - 功能：波浪呈现丝带感与传播感，视觉平滑不抖
  - 文件：新增/修改波浪渲染相关文件
- 完成判定：观感符合“古典麦浪”，低频增强肉眼可辨
- 输出格式：遵循“统一输出格式”

## Milestone 3
- 要做什么：获取并展示 Now Playing 元数据，缺失时自动降级
- 要产出什么：
  - 功能：可展示标题/艺术家/封面，获取失败仅显示波浪
  - 文件：新增/修改元数据获取与展示相关文件
- 完成判定：可获取时 1 秒内更新；不可获取时无闪退且界面稳定
- 输出格式：遵循“统一输出格式”

## Milestone 4
- 要做什么：加入菜单栏入口与设置项，参数可持久化（开机启动可选）
- 要产出什么：
  - 功能：显示/隐藏、灵敏度、主题、帧率等设置即时生效并可持久化
  - 文件：新增/修改菜单栏、设置、配置存储相关文件
- 完成判定：设置即时生效，重启后仍生效
- 输出格式：遵循“统一输出格式”
